\begin{lemma}[Inclusion of Bounded System F]
  \label{lemma:F-inclusion}
  Suppose $t$ is fully annotated and does not contain any applications
  of $[[box]]$ or $[[unbox]]$, and $[[A]]$ is static.  Then
  \begin{itemize}
  \item[i.] $[[G |-F t : A]]$ if and only if $\,[[G |- t : A]]$, and 
  \item[ii.] $[[t F~>* t']]$ if and only if $[[t ~>* t']]$.
  \end{itemize}
\end{lemma}
\begin{proof}
  We give proof sketches for both parts.  The interesting cases are
  the right-to-left directions of each part.  If we simply remove all
  rules mentioning the unknown type $[[?]]$ and the type consistency
  relation, and then remove $[[box]]$, $[[unbox]]$, and $[[?]]$ from
  the syntax of Surface Grady, then what we are left with is bounded
  system F.  Since $[[t]]$ is fully annotated and $[[A]]$ is static,
  then $[[G |- t : A]]$ will hold within this fragment.

  Moving on to part two, first, we know that $[[t]]$ does not contain
  any occurrence of $[[box]]$ or $[[unbox]]$ and is fully annotated.
  This implies that $[[t]]$ lives within the bounded system F fragment
  of Surface Grady. Thus, before evaluation of $[[t]]$ Surface Grady
  will apply the cast insertion algorithm which will at most insert
  applications of the identity function into $[[t]]$ producing a term
  $\widehat{[[t]]}$, but then after potentially more than one step of
  evaluation within Core Grady, those applications of the identity
  function will be $\beta$-reduced away resulting in $\widehat{[[t]]}
  \rightsquigarrow^* [[t]] \rightsquigarrow^* [[t']]$.  In addition,
  since $[[t]]$ in Surface Grady is the exact same program as $[[t]]$
  in bounded system F, then we know $[[t F~>* t']]$ will hold.
\end{proof}

\begin{lemma}[Inclusion of DTLC]
  \label{lemma:inclusion_of_dtlc}
  Suppose $[[t]]$ is a closed term of DTLC. Then
  \begin{itemize}
  \item[i.] $[[. |- |t| : ?]]$, and
  \item[ii.] $[[t D~>* t']]$ if and only if $[[|t| ~>* |t'|]]$.
  \end{itemize}
\end{lemma}
\begin{proof}
  In this case DTLC is embedded into the simply typed fragment of
  Grady, and hence, this proof is the same result proven by
  \cite{Siek:2006}, and \cite{Siek:2015}.
\end{proof}

\renewcommand{\SGradydrulePXXUName}{[[?]]}
\renewcommand{\SGradydrulePXXreflName}{\text{refl}}
\renewcommand{\SGradydrulePXXarrowName}{\to}
\renewcommand{\SGradydrulePXXprodName}{\times}
\renewcommand{\SGradydrulePXXlistName}{\mathsf{List}}
\renewcommand{\SGradydrulePXXforallName}{\forall}
\begin{figure}
  \begin{mdframed}
    \begin{mathpar}
      \SGradydrulePXXU{} \and
      \SGradydrulePXXrefl{} \and
      \SGradydrulePXXarrow{} \and
      \SGradydrulePXXprod{} \and
      \SGradydrulePXXlist{} \and
      \SGradydrulePXXforall{}      
    \end{mathpar}
  \end{mdframed}
  \caption{Type Precision}
  \label{fig:type-pre}
\end{figure}

\begin{lemma}
  \label{lemma:consistent-subtyping-1}
  Suppose $[[G |- A <~ B]]$.
  \begin{enumerate}[label=\roman*., align=left]
  \item $[[G |- A ~ A']]$ and $<<G |- A' <: B>>$ for some $[[A']]$.
  \item $[[G |- B' ~ B]]$ and $<<G |- A <: B'>>$ for some $[[B']]$.
  \end{enumerate}
\end{lemma}
\begin{proof}
  This is a proof by induction on $[[G |- A <~ B]]$.  We only show a
  few of the most interesting cases.
  \begin{itemize}
  \item[] Case.\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=$\SGradydruleSXXBoxName{}$] {
          [[G |- A : *]]
        }{[[G |- A <~ ?]]}
      \end{math}
    \end{center}
    In this case $[[B]] = [[?]]$.

    \noindent
    \textbf{Part i.} Choose $[[A']] = [[?]]$.

    \noindent
    \textbf{Part ii.} Choose $[[B']] = [[A]]$.

  \item[] Case.\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=$\SGradydruleSXXUnboxName{}$] {
          [[G |- B : *]]
        }{[[G |- ? <~ B]]}
      \end{math}
    \end{center}
    In this case $[[A]] = [[?]]$.

    \noindent
    \textbf{Part i.} Choose $[[A']] = [[B]]$.

    \noindent
    \textbf{Part ii.} Choose $[[B']] = [[?]]$.

  \item[] Case.\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=$\SGradydruleSXXArrowName{}$] {
          [[G |- A2 <~ A1 && G |- B1 <~ B2]]
        }{[[G |- (A1 -> B1) <~ (A2 -> B2)]]}
      \end{math}
    \end{center}

    In this case $[[A]] = [[A1 -> B1]]$ and $[[B]] = [[A2 -> B2]]$.

    \noindent
    \textbf{Part i.} By part two of the induction hypothesis we know
    that $[[G |- A1' ~ A1]]$ and $<<G |- A2 <: A1'>>$, and by part one of the induction hypothesis
    $[[G |- B1 ~ B1']]$ and $<<G |- B1' <: B2>>$.  By symmetry of type consistency
    we may conclude that $[[G |- A1 ~ A1']]$ which along with $[[G |- B1 ~ B1']]$
    implies that $[[G |- (A1 -> B1) ~ (A1' -> B1')]]$, and by reapplying the rule
    we may conclude that $<<G |- (A1' -> B1') <: (A2 -> B2)>>$.

    \noindent
    \textbf{Part ii.} Similar to part one, except that we first
    applying part one of the induction hypothesis to the first
    premise, and then the second part to the second premise.
    
  \end{itemize}

\end{proof}

\begin{lemma}
  \label{lemma:consistent-subtyping-2}
  If $<<G |- A <: B>>$, then $[[G |- A <~ B]]$.
\end{lemma}
\begin{proof}
  This proof holds by straightforward induction on $<<G |- A <: B>>$.
\end{proof}

\begin{lemma}
  \label{lemma:consistent-subtyping-3}
  if $[[G |- A ~ B]]$, then $[[G |- A <~ B]]$.
\end{lemma}
\begin{proof}
  By straightforward induction on $[[G |- A ~ B]]$.
\end{proof}

\begin{corollary}[Consistent Subtyping]
  \label{corollary:consistent_subtyping}
  \begin{enumerate}[label=\roman*.,align=left]
  \item[]
  \item $[[G |- A <~ B]]$ if and only if $[[G |- A ~ A']]$ and $<<G |- A' <: B>>$ for some $[[A']]$.
  \item $[[G |- A <~ B]]$ if and only if $[[G |- B' ~ B]]$ and $<<G |- A <: B'>>$ for some $[[B']]$.
  \end{enumerate}
\end{corollary}
\begin{proof}
  The left-to-right direction of both cases easily follows from
  Lemma~\ref{lemma:consistent-subtyping-1}, and the right-to-left
  direction of both cases follows from induction on the type
  consistency derivation with a case split on the subtyping derivation,
  and Lemma~\ref{lemma:consistent-subtyping-2} and Lemma~\ref{lemma:consistent-subtyping-3}.
\end{proof}

\begin{lemma}[Gradual Guarantee Part One]
  \label{lemma:gradual_guarantee_part_one}
  If $[[G |- t : A]]$ and $[[t <= t']]$, then $[[G |- t' : B]]$ and $[[G |- A <= B]]$.
\end{lemma}
\begin{proof}
  
\end{proof}

\begin{theorem}[Gradual Guarantee]
  \label{thm:gradual_guarantee}
  Suppose $[[. |- t : A]]$ and $[[t <= t']]$.  Then
  \begin{enumerate}[label=\roman*., align=left]     
  \item $[[. |- t' : B]]$ and $[[. |- A <= B]]$,
  \item if $[[t ~>* v]]$, then $[[t' ~>* v']]$ and $[[v <= v']]$,
  \item if $[[t ^]]$, then $[[t' ^]]$,
  \item if $[[t' ~>* v']]$, then $[[t ~>* v]]$ where $[[v <= v']]$, or $<<t ~>* error>>$, and
  \item if $[[t' ^]]$, then $[[t ^]]$ or $<<t ~>* error>>$.
  \end{enumerate}
\end{theorem}
\begin{proof}
  
\end{proof}
